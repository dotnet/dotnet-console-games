namespace Console_Monsters.Maps;

public class Center1 : Map
{
	public override char[][] SpriteSheet => new char[][]
		{
			"aaaaaaaaaaaaaaaaa".ToCharArray(),
			"a    a     a    a".ToCharArray(),
			"a    aaaaaaa    a".ToCharArray(),
			"a               a".ToCharArray(),
			"a               a".ToCharArray(),
			"aaaaaaa000aaaaaaa".ToCharArray(),
		};

	public override string GetMapTileRender(int tileI, int tileJ)
	{
		char[][] s = map.SpriteSheet;
		if (tileJ < 0 || tileJ >= s.Length || tileI < 0 || tileI >= s[tileJ].Length)
		{
			return Sprites.Open;
		}
		return s[tileJ][tileI] switch
		{
			'0' => Sprites.ArrowDown,
			'a' => Sprites.InteriorWallEWHigh,
			'x' => Sprites.Open,
			' ' => Sprites.Open,
			_ => Sprites.Error,
		};
	}

	public override void InteractWithMapTile(int tileI, int tileJ)
	{
		// nothing at the moment
	}

	public override bool IsValidCharacterMapTile(int tileI, int tileJ)
	{
		char[][] s = map.SpriteSheet;
		if (tileJ < 0 || tileJ >= s.Length || tileI < 0 || tileI >= s[tileJ].Length)
		{
			return false;
		}
		char c = s[tileJ][tileI];
		return c switch
		{
			' ' => true,
			'0' => true,
			_ => false,
		};
	}

	public override void PerformTileAction()
	{
		var (i, j) = WorldToTile(character.I, character.J);
		char[][] s = map.SpriteSheet;
		switch (s[j][i])
		{
			case '0':
				map = new PaletTown();
				SpawnCharacterOn('0');
				break;
		}
	}
}
